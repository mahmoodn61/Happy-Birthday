<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday to My Coding Brother!</title>
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Consolas', 'Courier New', monospace;
        }
        
        body {
            background-color: #1e1e2e;
            color: #f8f8f2;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            padding: 20px;
        }
        
        /* Card Container */
        .card {
            background-color: #282a36;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 100%;
            max-width: 800px;
            padding: 30px;
            position: relative;
            overflow: hidden;
            margin: 20px;
            border: 2px solid #bd93f9;
        }
        
        /* Title Styles */
        .title {
            color: #ff79c6;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 0 0 10px rgba(255, 121, 198, 0.5);
        }
        
        /* Message Container */
        .message-container {
            background-color: #44475a;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 20px;
            position: relative;
            border-left: 4px solid #50fa7b;
        }
        
        /* Function Declaration */
        .function-declaration {
            color: #50fa7b;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }
        
        /* Message Text */
        .message {
            color: #f8f8f2;
            font-size: 1.1rem;
            line-height: 1.6;
            white-space: pre-line;
            margin-left: 20px;
        }
        
        /* Return Statement */
        .return-statement {
            color: #ffb86c;
            font-size: 1.2rem;
            margin-top: 15px;
            margin-left: 20px;
        }
        
        /* Function Call */
        .function-call {
            color: #8be9fd;
            font-size: 1.2rem;
            margin-top: 20px;
            text-align: center;
        }
        
        /* Music Controls */
        .music-controls {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 15px;
        }
        
        .music-btn {
            background-color: #6272a4;
            color: #f8f8f2;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .music-btn:hover {
            background-color: #ff79c6;
            transform: scale(1.05);
        }
        
        /* Music Status */
        .music-status {
            text-align: center;
            color: #f1fa8c;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        /* Code Particles */
        .code-particle {
            position: absolute;
            color: rgba(189, 147, 249, 0.7);
            font-size: 1rem;
            pointer-events: none;
            animation: fall linear forwards;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh);
                opacity: 0;
            }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .title {
                font-size: 1.8rem;
            }
            
            .function-declaration, .return-statement, .function-call {
                font-size: 1rem;
            }
            
            .message {
                font-size: 0.9rem;
            }
            
            .card {
                padding: 20px;
            }
        }
        
        /* Cursor Animation */
        .cursor {
            display: inline-block;
            width: 10px;
            height: 20px;
            background-color: #f8f8f2;
            margin-left: 5px;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* Footer */
        .footer {
            margin-top: 20px;
            text-align: center;
            color: #6272a4;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1 class="title">Happy Birthday to My Coding Brother! üéÆ ‚Üí üíª</h1>
        
        <div class="message-container">
            <div class="function-declaration">def birthday_message():</div>
            <div class="message" id="typed-message"></div>
            <div class="return-statement" id="return-statement" style="display: none;">
                return "Wishing you the best year ever! üéÇ"
            </div>
        </div>
        
        <div class="function-call" id="function-call" style="display: none;">
            birthday_message() <span class="cursor"></span>
        </div>
        
        <div class="music-controls">
            <button class="music-btn" id="play-btn" onclick="playAudio()">‚ñ∂Ô∏è Play Music</button>
            <button class="music-btn" id="pause-btn" onclick="pauseAudio()">‚è∏Ô∏è Pause Music</button>
        </div>
        
        <div class="music-status" id="music-status">
            Music is ready to play
        </div>
    </div>
    
    <div class="footer">
        Made with ‚ù§Ô∏è and &lt;code/&gt;
    </div>
    
    <!-- Audio element with controls for debugging -->
    <audio id="bgMusic" loop>
        <source src="birthday_music.mp3" type="audio/mp3">
        Your browser does not support the audio element.
    </audio>
    
    <script>
        // The birthday message
        const birthdayMessage = `    To the brother who used to hold the game controller as a kid, and now hold the control of his future!

    A brother who codes the world into something better,
    and fills our lives with peace and love through his heart.

    You've always been an inspiration to me‚Äî
    in your dedication, patience, kindness,
    and the way you dream big.

    May your year be full of successful projects,
    bug-free, joyful moments, and love flowing between every line of life.

    With pride and love,
    Your sister`;
        
        // Typing animation
        const typedMessageElement = document.getElementById('typed-message');
        const returnStatementElement = document.getElementById('return-statement');
        const functionCallElement = document.getElementById('function-call');
        let charIndex = 0;
        let isTyping = true;
        
        function typeMessage() {
            if (charIndex < birthdayMessage.length) {
                typedMessageElement.textContent += birthdayMessage.charAt(charIndex);
                charIndex++;
                
                // Adjust typing speed - slower for punctuation
                const nextChar = birthdayMessage.charAt(charIndex);
                const delay = (nextChar === '.' || nextChar === '!' || nextChar === '?') ? 500 : 
                              (nextChar === ',' || nextChar === ';') ? 300 : 
                              (nextChar === '\n') ? 700 : 50;
                
                setTimeout(typeMessage, delay);
            } else {
                isTyping = false;
                // Show return statement after typing is complete
                setTimeout(() => {
                    returnStatementElement.style.display = 'block';
                    // Show function call after return statement appears
                    setTimeout(() => {
                        functionCallElement.style.display = 'block';
                    }, 1000);
                }, 1000);
            }
        }
        
        // Audio functions - Fixed with direct onclick handlers
        const audioElement = document.getElementById('bgMusic');
        const musicStatus = document.getElementById('music-status');
        
        // Global audio functions
        function playAudio() {
            console.log("Play button clicked");
            try {
                const playPromise = audioElement.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log("Audio playing successfully");
                        musicStatus.textContent = "Music is playing üéµ";
                    }).catch(error => {
                        console.error("Error playing audio:", error);
                        musicStatus.textContent = "Couldn't play music. Try again.";
                    });
                }
            } catch (e) {
                console.error("Exception playing audio:", e);
                musicStatus.textContent = "Error playing music";
            }
        }
        
        function pauseAudio() {
            console.log("Pause button clicked");
            try {
                audioElement.pause();
                musicStatus.textContent = "Music paused";
            } catch (e) {
                console.error("Exception pausing audio:", e);
            }
        }
        
        // Try to autoplay when page loads
        window.addEventListener('load', () => {
            // Start typing animation
            setTimeout(typeMessage, 1000);
            
            // Create code particles
            createCodeParticles();
            
            // Try to play audio automatically
            try {
                const playPromise = audioElement.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log("Autoplay successful");
                        musicStatus.textContent = "Music is playing üéµ";
                    }).catch(error => {
                        console.log("Autoplay prevented by browser:", error);
                        musicStatus.textContent = "Click Play Music to start the music";
                    });
                }
            } catch (e) {
                console.error("Exception during autoplay:", e);
            }
        });
        
        // Skip animation on click
        typedMessageElement.addEventListener('click', () => {
            if (isTyping) {
                // Stop the typing animation and show full message
                typedMessageElement.textContent = birthdayMessage;
                charIndex = birthdayMessage.length;
                isTyping = false;
                
                // Show return statement and function call
                returnStatementElement.style.display = 'block';
                functionCallElement.style.display = 'block';
            }
        });
        
        // Create falling code particles
        function createCodeParticles() {
            const codeChars = ['0', '1', '{', '}', '()', '[]', ';', ':', '=', '+', '-', '*', '/', '<>', 'def', 'for', 'if', 'else', 'return', 'class'];
            const colors = ['#ff79c6', '#50fa7b', '#8be9fd', '#bd93f9', '#f1fa8c'];
            
            setInterval(() => {
                const particle = document.createElement('div');
                particle.className = 'code-particle';
                particle.textContent = codeChars[Math.floor(Math.random() * codeChars.length)];
                particle.style.left = `${Math.random() * 100}vw`;
                particle.style.color = colors[Math.floor(Math.random() * colors.length)];
                particle.style.opacity = Math.random() * 0.7 + 0.3;
                particle.style.fontSize = `${Math.random() * 1 + 0.5}rem`;
                
                // Set animation duration randomly
                const duration = Math.random() * 10 + 5;
                particle.style.animationDuration = `${duration}s`;
                
                document.body.appendChild(particle);
                
                // Remove particle after animation completes
                setTimeout(() => {
                    particle.remove();
                }, duration * 1000);
            }, 300);
        }
        
        // Add event listeners for user interaction to help with autoplay
        document.addEventListener('click', function() {
            if (audioElement.paused) {
                playAudio();
            }
        }, { once: true });
    </script>
</body>
</html>
